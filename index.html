<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zero Bookmark Manager</title>
    <link rel="stylesheet" href="./styles/style.css">
    <link rel="stylesheet" href="./styles/popup.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
</head>

<body>
    <div class="container">
        <div class="header">
            <img src="" alt="logo" class="logo">
            <div class="settings-container" id="settings-container">
                <button id="settings-button" class="button settings" title="Settings">⋮</button>
                <div id="settings-menu" class="dropdown-menu hidden">
                    <span class="dropdown-section-title" data-i18n="extensionOptionsTitle">Extension Options</span>
                    <select id="language-switcher" class="select">
                        <option value="en">English</option>
                        <option value="vi">Tiếng Việt</option>
                    </select>
                    <div id="tag-filter-container" class="tag-filter-container">
                        <button id="tag-filter-toggle" class="select">Select Tags</button>
                        <div id="tag-filter-dropdown" class="dropdown-menu hidden">
                            <div id="tag-filter-options"></div>
                        </div>
                    </div>
                    <select id="theme-switcher" class="select select-with-icons">
                        <option value="system">&#xf108; System</option>
                        <option value="light">&#9889; Light</option>
                        <option value="dark">&#9889; Dark</option>
                        <option value="dracula">&#9889; Dracula</option>
                        <option value="onedark">&#9889; OneDark</option>
                        <option value="tokyonight">&#9889; Tokyo Night</option>
                        <option value="monokai">&#9889; Monokai</option>
                        <option value="winter-is-coming">&#9889; Winter is Coming</option>
                        <option value="github-blue">&#9889; GitHub Blue</option>
                        <option value="github-light">&#9889; GitHub Light</option>
                        <option value="tet">&#9889; Tet</option>
                    </select>
                    <select id="font-switcher" class="select select-with-icons">
                        <option value="gohu">Aa: GohuFont</option>
                        <option value="jetBrainsMonoNerdFont">Aa: jetBrains</option>
                        <option value="anonymiceProNerd">Aa: AnonymiceProNerd</option>
                        <option value="proFontWindowsNerdFontPropo">Aa: ProFont</option>
                    </select>
                    <select id="view-switcher" class="select select-with-icons">
                        <option value="flat">&#xf03a; Flat List</option>
                        <option value="tree">&#xf0e8; Tree View</option>
                        <option value="detail">&#xf05a; Detail View</option>
                        <option value="card">&#xf009; Card View</option>
                    </select>
                    <!-- <hr> First HR after general settings -->
                    <span class="dropdown-section-title" data-i18n="bookmarkActionsTitle">Bookmark Actions</span>
                    <button id="edit-in-new-tab-option" class="menu-item">Edit in New Tab</button>
                    <button id="open-side-panel-option" class="menu-item">Open Side Panel</button>
                    <button id="export-bookmarks-option" class="menu-item">Export Bookmarks</button>
                    <button id="import-bookmarks-option" class="menu-item">Import Bookmarks</button>
                    <button id="show-bookmark-ids-option" class="menu-item">Show Bookmark IDs</button>
                    <button id="organize-folders-button" class="menu-item">

                        <i class="fas fa-sitemap" aria-hidden="true"></i>
                        Organize Folders</button>
                    <span class="dropdown-section-title" data-i18n="quickOpenTitle">Quick Open Action</span>
                    <div id="quick-open-settings" class="quick-open-settings">
                        <label>
                            <input type="radio" id="quick-open-popup" name="quickOpenAction" value="popup" />
                            <span data-i18n="quickOpenPopup">Popup</span>
                        </label>
                        <label>
                            <input type="radio" id="quick-open-sidepanel" name="quickOpenAction" value="sidepanel" />
                            <span data-i18n="quickOpenSidePanel">Side Panel</span>
                        </label>
                        <label>
                            <input type="radio" id="quick-open-web" name="quickOpenAction" value="web" />
                            <span data-i18n="quickOpenWeb">Full Page</span>
                        </label>
                    </div>
                    <!-- <hr> Second HR after bookmark actions -->
                    <span class="dropdown-section-title" data-i18n="bookmarkHealthSmallTitle">Bookmark Health &
                        Duplicates</span>
                    <button id="check-health-btn" class="button button-warning">
                        <i class="fas fa-stethoscope"></i> <span data-i18n="checkLinks">Check Links</span>
                    </button>
                    <button id="check-duplicates-btn" class="button button-primary">
                        <i class="fas fa-copy"></i> <span data-i18n="checkDuplicates">Check Duplicates</span>
                    </button>
                    <!-- <hr> Third HR after health checks -->
                    <span class="dropdown-section-title" data-i18n="appSettingsTitle">Application Settings</span>
                    <button id="view-visit-counts-option" class="menu-item">
                        <i class="fas fa-eye"></i> View Visit Counts
                    </button>
                    <button id="localstorage-settings-option" class="menu-item">
                        <i class="fas fa-cog"></i> Local Storage Settings
                    </button>
                </div>
            </div>
        </div>
        <div class="controls">
            <select id="folder-filter" class="select">
                <option value="">All Bookmarks</option>
            </select>
            <select id="sort-filter" class="select">
                <option value="default">Sort: Default</option>
                <option value="new">New to Old</option>
                <option value="old">Old to New</option>
                <option value="last-opened">By Last Opened</option>
                <option value="most-visited">Most Visited</option>
                <option value="a-z">A to Z</option>
                <option value="z-a">Z to A</option>
                <option value="domain">By Domain</option>
            </select>
            <select id="health-sort-filter" class="select" style="display: none;">
                <option value="all">Sort by Health: All</option>
                <option value="dead">Dead Links</option>
                <option value="suspicious">Suspicious Links</option>
                <option value="safe">Safe Links</option>
            </select>
            <div class="control-buttons">
                <button id="create-folder" class="button create">Create Folder</button>
                <button id="rename-folder" class="button rename-folder hidden">Rename Folder</button>
                <button id="add-to-folder" class="button add hidden">Add to Folder</button>
                <button id="delete-folder" class="button delete-folder hidden">Delete Folder</button>
                <button id="delete-bookmarks-button" class="button delete-bookmarks hidden">Delete Bookmarks</button>
            </div>
        </div>
        <div id="bookmark-count" class="count">Total Bookmarks: 0</div>
        <div class="bottom-controls">
            <div class="select-all">
                <input type="checkbox" id="select-all">
                <label for="select-all">Select All</label>
            </div>
            <button id="toggle-checkboxes" class="button toggle small">Show Checkboxes</button>
        </div>
        <div class="search-container sticky-search">
            <input type="text" id="search" placeholder="Search bookmarks..." class="input">
            <button id="clear-search" class="button clear">✖</button>
        </div>
        <div id="folder-list" class="folder-list"></div>

        <div id="folder-context-menu" class="context-menu hidden"
            style="position: fixed; z-index: 2000; min-width: 150px;">
            <div class="menu-item" id="context-menu-move-folder">
                <i class="fas fa-folder-open" style="width: 14px; text-align: center; margin-right: 8px;"></i>
                <span>Move to Folder</span>
            </div>
        </div>

        <div id="rename-popup" class="rename-popup hidden" role="dialog" aria-labelledby="rename-title">
            <div class="rename-popup-content">
                <h3 id="rename-title">Rename</h3>
                <div class="rename-input-container">
                    <textarea id="rename-input" class="input" placeholder="Enter new name..."
                        aria-label="New bookmark title" maxlength="255" rows="1"></textarea>
                    <button id="clear-rename" class="button clear" aria-label="Clear rename input">✖</button>
                </div>
                <div class="rename-popup-buttons">
                    <button id="rename-save" class="button save">Save</button>
                    <button id="rename-cancel" class="button cancel">Cancel</button>
                </div>
            </div>
        </div>
        <div id="rename-folder-popup" class="rename-popup hidden" role="dialog" aria-labelledby="rename-folder-title">
            <div class="rename-popup-content">
                <h3 id="rename-folder-title">Rename Folder</h3>
                <div class="rename-input-container">
                    <select id="rename-folder-select" class="select" aria-label="Select folder to rename">
                        <option value="">Select Folder</option>
                    </select>
                    <textarea id="rename-folder-input" class="input" placeholder="Enter new folder name..."
                        aria-label="New folder name" maxlength="255" rows="1"></textarea>
                    <button id="clear-rename-folder" class="button clear"
                        aria-label="Clear rename folder input">✖</button>
                </div>
                <div class="rename-popup-buttons">
                    <button id="rename-folder-save" class="button save">Save</button>
                    <button id="rename-folder-cancel" class="button cancel">Cancel</button>
                </div>
            </div>
        </div>
        <div id="add-to-folder-popup" class="rename-popup hidden" role="dialog" aria-labelledby="add-to-folder-title">
            <div class="rename-popup-content">
                <h3 id="add-to-folder-title">Add to Folder</h3>
                <div class="add-to-folder-container">
                    <select id="add-to-folder-select" class="select" aria-label="Select folder">
                        <option value="">Select Folder</option>
                    </select>
                </div>
                <div class="rename-popup-buttons">
                    <button id="add-to-folder-save" class="button save">Save</button>
                    <button id="add-to-folder-cancel" class="button cancel">Cancel</button>
                </div>
            </div>
        </div>
        <div id="create-folder-popup" class="rename-popup hidden" role="dialog" aria-labelledby="create-folder-title">
            <div class="rename-popup-content">
                <h3 id="create-folder-title">Create Folder</h3>
                <div class="rename-input-container">
                    <textarea id="create-folder-input" class="input" placeholder="Enter folder name..." maxlength="255"
                        rows="1"></textarea>
                    <button id="clear-create-folder" class="button clear">✖</button>
                </div>
                <div class="rename-popup-buttons">
                    <button id="create-folder-save" class="button save">Save</button>
                    <button id="create-folder-cancel" class="button cancel">Cancel</button>
                </div>
            </div>
        </div>
        <div id="bookmark-detail-popup" class="rename-popup hidden" role="dialog" aria-labelledby="detail-title">
            <div class="rename-popup-content" style="display: flex; gap: 16px; align-items: flex-start;">

                <!-- Cột trái: ảnh thumbnail -->
                <div class="bookmark-thumbnail" style="flex: 0 0 150px;">
                    <img id="detail-thumbnail" src="" alt="Website thumbnail" />
                </div>

                <!-- Cột phải: thông tin -->
                <div class="bookmark-info" style="flex: 1;">
                    <h3 id="detail-title-label">Bookmark Detail</h3>
                    <p><strong>Title:</strong> <span id="detail-title"></span></p>
                    <p><strong>URL:</strong> <span id="detail-url"></span></p>
                    <p><strong>Date Added:</strong> <span id="detail-date-added"></span></p>
                    <p><strong>Tags:</strong> <span id="detail-tags"></span></p>
                    <div class="rename-popup-buttons" style="margin-top: 16px;">
                        <button class="close-modal button cancel">Close</button>
                    </div>
                </div>

            </div>
        </div>
        <div id="manage-tags-popup" class="rename-popup hidden" role="dialog" aria-labelledby="manage-tags-title">
            <div class="rename-popup-content">
                <h3 id="manage-tags-title" data-i18n="manageTags">Manage Tags</h3>

                <!-- Section for existing tags -->
                <div class="form-section">
                    <label data-i18n="currentTagsLabel">Current Tags:</label>
                    <div id="existing-tags" class="tags-container">
                        <!-- Tags will be dynamically inserted here -->
                    </div>
                </div>

                <!-- Section for adding a new tag -->
                <div class="form-section">
                    <label for="new-tag-input" data-i18n="addNewTagLabel">Add New Tag:</label>
                    <div class="add-tag-form">
                        <input type="text" id="new-tag-input" class="input" placeholder="Enter tag name..."
                            data-i18n-placeholder="newTagPlaceholder">
                        <input type="hidden" id="new-tag-color" value="#FFFFFF">
                        <input type="hidden" id="new-tag-text-color" value="#000000">
                    </div>
                    <div class="color-palette-container">
                        <button class="color-swatch" data-color="#4CAF50" style="background-color:#4CAF50;"></button>
                        <button class="color-swatch" data-color="#2196F3" style="background-color:#2196F3;"></button>
                        <button class="color-swatch" data-color="#FF9800" style="background-color:#FF9800;"></button>
                        <button class="color-swatch" data-color="#E91E63" style="background-color:#E91E63;"></button>
                        <button class="color-swatch" data-color="#9C27B0" style="background-color:#9C27B0;"></button>
                        <button class="color-swatch" data-color="#795548" style="background-color:#795548;"></button>
                        <button class="color-swatch" data-color="#607D8B" style="background-color:#607D8B;"></button>
                        <button class="color-swatch" data-color="#FFFFFF" style="background-color:#FFFFFF;"></button>
                    </div>
                </div>

                <!-- Section for adding from existing global tags -->
                <div class="form-section">
                    <label for="existing-tags-select" data-i18n="addFromExistingLabel">Or add from existing:</label>
                    <select id="existing-tags-select" class="select existing-tags-select"></select>
                </div>


                <!-- Action buttons -->
                <div class="rename-popup-buttons">
                    <button id="add-tag-btn" class="button save" data-i18n="addTag">Add Tag</button>
                    <button class="close-modal button cancel" data-i18n="doneLabel">Done</button>
                </div>
            </div>
        </div>
        <div id="custom-popup" class="rename-popup hidden" role="dialog" aria-labelledby="custom-popup-title">
            <div class="rename-popup-content">
                <h3 id="custom-popup-title">Notification</h3>
                <p id="custom-popup-message"></p>
                <div class="rename-popup-buttons">
                    <button id="custom-popup-ok" class="button save">OK</button>
                </div>
            </div>
        </div>
        <div id="localstorage-settings-popup" class="rename-popup hidden" role="dialog"
            aria-labelledby="localstorage-settings-title">
            <div class="rename-popup-content">
                <h3 id="localstorage-settings-title">Local Storage Settings</h3>
                <div class="localstorage-settings-container">
                    <label><input type="checkbox" id="save-searchQuery" checked> Save Search Query</label>
                    <label><input type="checkbox" id="save-selectedFolderId" checked> Save Selected Folder</label>
                    <label><input type="checkbox" id="save-sortType" checked> Save Sort Type</label>
                    <label><input type="checkbox" id="save-viewMode" checked> Save View Mode</label>
                    <label><input type="checkbox" id="save-collapsedFolders" checked> Save Collapsed Folders</label>
                    <label><input type="checkbox" id="save-checkboxesVisible" checked> Save Checkboxes
                        Visibility</label>
                    <label><input type="checkbox" id="save-selectedTag" checked> Save Selected Tags</label>

                </div>
                <div class="rename-popup-buttons">
                    <button id="localstorage-settings-save" class="button save">Save</button>
                    <button id="localstorage-settings-cancel" class="button cancel">Cancel</button>
                </div>
            </div>
        </div>

        <div id="organize-folders-popup" class="rename-popup hidden popup-animate" role="dialog"
            aria-labelledby="organize-folders-title">
            <div class="rename-popup-content organize-folders-popup-content">

                <h3 id="organize-folders-title">Organize Folders</h3>
                <div class="organize-folders-tree-container">
                    <!-- Tree view of folders and bookmarks will be rendered here -->
                    <div id="organize-folders-tree-view"></div>
                </div>
                <div class="rename-popup-buttons">
                    <button id="organize-folders-close" class="button cancel">Close</button>
                </div>
            </div>
        </div>
        <button id="scroll-to-top" class="button scroll-to-top" title="Scroll to Top" aria-label="Scroll to Top">
            <i class="fas fa-caret-up"></i>
        </button>
        <!-- footer -->
        <div class="footer">
            <p class="footer-text">
                <span id="year"></span>
                <span class="my-name"> &copy; chickensoup</span>
                - version: <span id="version"></span>
            </p>
        </div>
    </div>
    <script src="./components/tag.js" type="module"></script>
    <script src="./components/lib/qrcode.min.js"></script>
    <script src="./components/year.js" type="module"></script>
    <script src="./components/option/option.js" type="module"></script>
    <script src="main.js" type="module"></script>
    <script src="./components/localization.js" type="module"></script>
</body>

</html>