<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zero Bookmark Manager</title>
    <link rel="stylesheet" href="./styles/style.css">
    <link rel="stylesheet" href="./styles/chat.css">
    <link rel="stylesheet" href="./styles/webview.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
</head>

<body>
    <div class="container grid-layout">
        <div class="sidebar">
            <div class="sidebar-header">
                <img src="path/to/logo.png" alt="Zero Bookmark Manager Logo" class="logo">
                <div class="sidebar-count">
                    <i class="fas fa-bookmark sidebar-count-icon" aria-hidden="true"></i>
                    <div id="bookmark-count" class="count"></div>
                </div>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-section-title">
                    <i class="fas fa-filter" aria-hidden="true"></i>
                    <span id="filters-title">Filters</span>
                </div>
                <div class="controls flex-column">
                    <select id="folder-filter" class="select" aria-label="Folder filter">
                        <option value="">All Bookmarks</option>
                    </select>
                    <div id="tag-filter-container" class="tag-filter-container">
                        <button id="tag-filter-toggle" class="select" aria-haspopup="true" aria-expanded="false">
                            <i class="fas fa-tags" aria-hidden="true"></i>
                            <span>Select Tags</span>
                        </button>
                        <div id="tag-filter-dropdown" class="dropdown-menu hidden">
                            <div id="tag-filter-options"></div>
                        </div>
                    </div>
                    <select id="sort-filter" class="select" aria-label="Sort bookmarks">
                        <option value="default">Sort: Default</option>
                        <option value="new">New to Old</option>
                        <option value="old">Old to New</option>
                        <option value="last-opened">By Last Opened</option>
                        <option value="a-z">A to Z</option>
                        <option value="z-a">Z to A</option>
                        <option value="domain">By Domain</option>
                    </select>
                </div>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-section-title">
                    <i class="fas fa-search" aria-hidden="true"></i>
                    <span id="search-title">Search</span>
                </div>
                <div class="search-container">
                    <input type="text" id="search" placeholder="Search bookmarks..." class="input"
                        aria-label="Search bookmarks">
                    <button id="clear-search" class="button clear" aria-label="Clear search">✖</button>
                </div>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-section-title">
                    <i class="fas fa-folder" aria-hidden="true"></i>
                    <span id="folder-actions-title">Folder actions</span>
                </div>
                <div class="control-buttons grid-buttons">
                    <button id="create-folder" class="button create">
                        <i class="fas fa-folder" aria-hidden="true"></i>
                        <span>Create Folder</span>
                    </button>
                    <button id="rename-folder" class="button rename-folder hidden">
                        <i class="fas fa-edit" aria-hidden="true"></i>
                        <span>Rename Folder</span>
                    </button>
                    <button id="add-to-folder" class="button add hidden">
                        <i class="fas fa-folder-open" aria-hidden="true"></i>
                        <span>Add to Folder</span>
                    </button>
                    <button id="delete-folder" class="button delete-folder hidden">
                        <i class="fas fa-trash" aria-hidden="true"></i>
                        <span>Delete Folder</span>
                    </button>
                    <button id="organize-folders-button" class="button organize">
                        <i class="fas fa-sitemap" aria-hidden="true"></i>
                        <span>Organize Folders</span>
                    </button>
                    <button id="delete-bookmarks-button" class="button delete-bookmarks hidden">
                        <i class="fas fa-trash" aria-hidden="true"></i>
                        <span>Delete Bookmarks</span>
                    </button>
                </div>
            </div>

            <div class="sidebar-section sidebar-section-bottom">
                <div class="sidebar-section-title sidebar-section-title-small">
                    <i class="far fa-check-square" aria-hidden="true"></i>
                    <span id="selection-title">Selection</span>
                </div>
                <div class="bottom-controls flex-row">
                    <div class="select-all">
                        <input type="checkbox" id="select-all" aria-label="Select all bookmarks">
                        <label for="select-all">Select All</label>
                    </div>
                    <button id="toggle-checkboxes" class="button toggle small">
                        <i class="fas fa-list-ul" aria-hidden="true"></i>
                        <span>Show Checkboxes</span>
                    </button>
                </div>
            </div>
        </div>

        <div class="header flex-header">
            <button id="toggle-sidebar" class="button toggle-sidebar" title="Toggle Sidebar"
                aria-label="Toggle Sidebar">
                <i class="fas fa-bars"></i>
            </button>
            <img src="path/to/logo.png" alt="Zero Bookmark Manager Logo" class="logo">
            <div class="settings-container">
                <select id="health-sort-filter" class="select" style="display: none;" aria-label="Sort by health">
                    <option value="all" data-i18n="healthSortAll">Sort by Health: All</option>
                    <option value="dead" data-i18n="healthSortDead">Dead Links</option>
                    <option value="suspicious" data-i18n="healthSortSuspicious">Suspicious Links</option>
                    <option value="safe" data-i18n="healthSortSafe">Safe Links</option>
                </select>
                <button id="settings-button" class="button settings" title="Settings"
                    aria-label="Open settings">⋮</button>
                <div id="settings-menu" class="dropdown-menu-2 hidden">
                    <select id="language-switcher" class="select" aria-label="Select language">
                        <option value="en">English</option>
                        <option value="vi">Tiếng Việt</option>
                    </select>
                    <select id="theme-switcher" class="select select-with-icons" aria-label="Select theme">
                        <option value="system">&#xf108; System</option>
                        <option value="light">&#9889; Light</option>
                        <option value="dark">&#9889; Dark</option>
                        <option value="dracula">&#9889; Dracula</option>
                        <option value="onedark">&#9889; OneDark</option>
                        <option value="tet">&#9889; Tet</option>
                    </select>
                    <select id="font-switcher" class="select select-with-icons" aria-label="Select font">
                        <option value="hackNerd">Aa: HackNerd</option>
                        <option value="gohu">Aa: GohuFont</option>
                        <option value="anonymiceProNerd">Aa: AnonymicePro</option>
                        <option value="proFontWindowsNerdFontPropo">Aa: ProFont</option>
                        <option value="jetBrainsMonoNerdFont">Aa: JetBrains</option>
                    </select>
                    <select id="view-switcher" class="select select-with-icons" aria-label="Select view mode">
                        <option value="flat">&#xf03a; Flat List</option>
                        <option value="tree">&#xf0e8; Tree View</option>
                        <option value="detail">&#xf05a; Detail View</option>
                        <option value="card">&#xf009; Card View</option>
                    </select>
                    <hr>
                    <button id="edit-in-new-tab-option" class="menu-item">Edit in New Tab</button>
                    <button id="export-bookmarks-option" class="menu-item">Export Bookmarks</button>
                    <button id="import-bookmarks-option" class="menu-item">Import Bookmarks</button>
                    <button id="show-bookmark-ids-option" class="menu-item">Show Bookmark IDs</button>
                    <button id="check-health-btn" class="button button-warning">
                        <i class="fas fa-stethoscope"></i> Check Links
                    </button>
                    <hr>
                    <button id="localstorage-settings-option" class="menu-item">
                        <i class="fas fa-cog"></i> Local Storage Settings
                    </button>
                </div>
            </div>
        </div>

        <div class="back-button-container" id="back-button-container" style="display: none;">
            <button id="back-button" class="button back-button" aria-label="Go back">
                <span style="font-size: 18px;">←</span>
                <span>Back</span>
            </button>
        </div>

        <div id="folder-list" class="folder-list card-grid"></div>

        <div id="organize-folders-popup" class="rename-popup hidden popup-animate" role="dialog"
            aria-labelledby="organize-folders-title">
            <div class="rename-popup-content organize-folders-popup-content">
                <h3 id="organize-folders-title">Organize Folders</h3>
                <div class="organize-folders-tree-container">
                    <!-- Tree view of folders and bookmarks will be rendered here -->
                    <div id="organize-folders-tree-view"></div>
                </div>
                <div class="rename-popup-buttons">
                    <button id="organize-folders-close" class="button cancel">Close</button>
                </div>
            </div>
        </div>

        <div id="folder-context-menu" class="context-menu hidden"
            style="position: fixed; z-index: 2000; min-width: 150px;">
            <div class="menu-item" id="context-menu-move-folder">
                <i class="fas fa-folder-open" style="width: 14px; text-align: center; margin-right: 8px;"></i>
                <span>Move to Folder</span>
            </div>
        </div>

        <div id="rename-popup" class="rename-popup hidden popup-animate" role="dialog" aria-labelledby="rename-title">
            <div class="rename-popup-content">
                <h3 id="rename-title">Rename</h3>
                <div class="rename-input-container">
                    <textarea id="rename-input" class="input" placeholder="Enter new name..."
                        aria-label="New bookmark title" maxlength="255" rows="1"></textarea>
                    <button id="clear-rename" class="button clear" aria-label="Clear rename input">✖</button>
                </div>
                <div class="rename-popup-buttons">
                    <button id="rename-save" class="button save">Save</button>
                    <button id="rename-cancel" class="button cancel">Cancel</button>
                </div>
            </div>
        </div>

        <div id="rename-folder-popup" class="rename-popup hidden popup-animate" role="dialog"
            aria-labelledby="rename-folder-title">
            <div class="rename-popup-content">
                <h3 id="rename-folder-title">Rename Folder</h3>
                <div class="rename-input-container">
                    <select id="rename-folder-select" class="select" aria-label="Select folder to rename">
                        <option value="">Select Folder</option>
                    </select>
                    <textarea id="rename-folder-input" class="input" placeholder="Enter new folder name..."
                        aria-label="New folder name" maxlength="255" rows="1"></textarea>
                    <button id="clear-rename-folder" class="button clear"
                        aria-label="Clear rename folder input">✖</button>
                </div>
                <div class="rename-popup-buttons">
                    <button id="rename-folder-save" class="button save">Save</button>
                    <button id="rename-folder-cancel" class="button cancel">Cancel</button>
                </div>
            </div>
        </div>

        <div id="add-to-folder-popup" class="rename-popup hidden popup-animate" role="dialog"
            aria-labelledby="add-to-folder-title">
            <div class="rename-popup-content">
                <h3 id="add-to-folder-title">Add to Folder</h3>
                <div class="add-to-folder-container">
                    <select id="add-to-folder-select" class="select" aria-label="Select folder">
                        <option value="">Select Folder</option>
                    </select>
                </div>
                <div class="rename-popup-buttons">
                    <button id="add-to-folder-save" class="button save">Save</button>
                    <button id="add-to-folder-cancel" class="button cancel">Cancel</button>
                </div>
            </div>
        </div>

        <div id="create-folder-popup" class="rename-popup hidden popup-animate" role="dialog"
            aria-labelledby="create-folder-title">
            <div class="rename-popup-content">
                <h3 id="create-folder-title">Create Folder</h3>
                <div class="rename-input-container">
                    <textarea id="create-folder-input" class="input" placeholder="Enter folder name..."
                        aria-label="Folder name" maxlength="255" rows="1"></textarea>
                    <button id="clear-create-folder" class="button clear" aria-label="Clear folder name">✖</button>
                </div>
                <div class="rename-popup-buttons">
                    <button id="create-folder-save" class="button save">Save</button>
                    <button id="create-folder-cancel" class="button cancel">Cancel</button>
                </div>
            </div>
        </div>

        <div id="bookmark-detail-popup" class="rename-popup hidden popup-animate" role="dialog"
            aria-labelledby="detail-title">
            <div class="rename-popup-content" style="display: flex; gap: 16px; align-items: flex-start;">
                <div class="bookmark-thumbnail" style="flex: 0 0 150px;">
                    <img id="detail-thumbnail" src="" alt="Website thumbnail" />
                </div>
                <div class="bookmark-info" style="flex: 1;">
                    <h3 id="detail-title-label">Bookmark Detail</h3>
                    <p><strong>Title:</strong> <span id="detail-title"></span></p>
                    <p><strong>URL:</strong> <span id="detail-url"></span></p>
                    <p><strong>Date Added:</strong> <span id="detail-date-added"></span></p>
                    <p><strong>Tags:</strong> <span id="detail-tags"></span></p>
                    <div class="rename-popup-buttons" style="margin-top: 16px;">
                        <button class="close-modal button cancel">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="manage-tags-popup" class="rename-popup hidden" role="dialog" aria-labelledby="manage-tags-title">
            <div class="rename-popup-content">
                <h3 id="manage-tags-title" data-i18n="manageTags">Manage Tags</h3>

                <!-- Section for existing tags -->
                <div class="form-section">
                    <label data-i18n="currentTagsLabel">Current Tags:</label>
                    <div id="existing-tags" class="tags-container">
                        <!-- Tags will be dynamically inserted here -->
                    </div>
                </div>

                <!-- Section for adding a new tag -->
                <div class="form-section">
                    <label for="new-tag-input" data-i18n="addNewTagLabel">Add New Tag:</label>
                    <div class="add-tag-form">
                        <input type="text" id="new-tag-input" class="input" placeholder="Enter tag name..."
                            data-i18n-placeholder="newTagPlaceholder">
                        <input type="hidden" id="new-tag-color" value="#FFFFFF">
                        <input type="hidden" id="new-tag-text-color" value="#000000">
                    </div>
                    <div class="color-palette-container">
                        <button class="color-swatch" data-color="#4CAF50" style="background-color:#4CAF50;"></button>
                        <button class="color-swatch" data-color="#2196F3" style="background-color:#2196F3;"></button>
                        <button class="color-swatch" data-color="#FF9800" style="background-color:#FF9800;"></button>
                        <button class="color-swatch" data-color="#E91E63" style="background-color:#E91E63;"></button>
                        <button class="color-swatch" data-color="#9C27B0" style="background-color:#9C27B0;"></button>
                        <button class="color-swatch" data-color="#795548" style="background-color:#795548;"></button>
                        <button class="color-swatch" data-color="#607D8B" style="background-color:#607D8B;"></button>
                        <button class="color-swatch" data-color="#FFFFFF" style="background-color:#FFFFFF;"></button>
                    </div>
                </div>

                <!-- Section for adding from existing global tags -->
                <div class="form-section">
                    <label for="existing-tags-select" data-i18n="addFromExistingLabel">Or add from existing:</label>
                    <select id="existing-tags-select" class="select existing-tags-select"></select>
                </div>


                <!-- Action buttons -->
                <div class="rename-popup-buttons">
                    <button id="add-tag-btn" class="button save" data-i18n="addTag">Add Tag</button>
                    <button class="close-modal button cancel" data-i18n="doneLabel">Done</button>
                </div>
            </div>
        </div>

        <div id="custom-popup" class="rename-popup hidden popup-animate" role="dialog"
            aria-labelledby="custom-popup-title">
            <div class="rename-popup-content">
                <h3 id="custom-popup-title">Notification</h3>
                <p id="custom-popup-message"></p>
                <div class="rename-popup-buttons">
                    <button id="custom-popup-ok" class="button save">OK</button>
                </div>
            </div>
        </div>

        <div id="ai-config-popup" class="rename-popup hidden popup-animate" role="dialog"
            aria-labelledby="ai-config-title">
            <div class="rename-popup-content">
                <h3 id="ai-config-title" class="ai-title">Configure AI Chatbot</h3>
                <div class="ai-config-container">
                    <div class="input-container">
                        <select id="ai-model-select" class="select" aria-label="Select AI model">
                            <option value="">Select AI Model</option>
                            <option value="gemini">Gemini</option>
                            <option value="gpt">GPT</option>
                        </select>
                        <div id="ai-model-error" class="error-message hidden">Please select an AI model.</div>
                    </div>
                    <div class="input-container">
                        <div class="rename-input-container">
                            <input type="password" id="api-key-input" class="input" placeholder="Enter API key..."
                                aria-label="API key" maxlength="255" />
                            <button type="button" id="toggle-api-visibility" class="button eye"
                                aria-label="Toggle API key visibility"><i class="fas fa-eye-slash"></i></button>
                        </div>
                        <div id="api-key-error" class="error-message hidden">Please enter an API key.</div>
                    </div>
                    <div class="input-container">
                        <div class="rename-input-container">
                            <textarea id="curl-input" class="input"
                                placeholder="Enter model name (e.g., gemini-2.0-flash or gpt-3.5-turbo)" rows="4"
                                aria-label="Model name"></textarea>
                            <button id="clear-curl" class="button clear" aria-label="Clear model name input">✖</button>
                        </div>
                        <div id="curl-error" class="error-message hidden">Please enter a model name.</div>
                    </div>
                </div>
                <div class="rename-popup-buttons">
                    <button id="ai-config-save" class="button save">Save</button>
                    <button id="ai-config-cancel" class="button cancel">Cancel</button>
                </div>
            </div>
        </div>

        <div class="floating-buttons">
            <button id="scroll-to-top" class="button scroll-to-top" title="Scroll to Top" aria-label="Scroll to Top">
                <i class="fas fa-caret-up"></i>
            </button>
            <button id="chat-toggle" class="chat-toggle" title="Open Chat" aria-label="Open Chat">
                <i class="far fa-comment-alt"></i>
            </button>
        </div>

        <div id="chatbox" class="chatbox hidden">
            <div class="chatbox-content">
                <h3>
                    ChatBot
                    <div class="chatbox-header-controlers">
                        <button id="chat-help" class="chatbox-header-button" title="Help Guide"
                            aria-label="Open help guide">
                            <i class="fas fa-question-circle"></i>
                        </button>
                        <button id="chat-history" class="chatbox-header-button" title="Export Chat History"
                            aria-label="Export chat history">
                            <i class="fas fa-history"></i>
                        </button>
                        <button id="chat-maximize" class="chatbox-header-button" title="Maximize/Minimize"
                            aria-label="Toggle maximize">
                            <i class="fas fa-expand"></i>
                        </button>
                        <button id="chat-edit-config" class="chatbox-header-button" title="Edit AI Config"
                            aria-label="Edit AI configuration">
                            <i class="fas fa-cog"></i>
                        </button>
                        <button id="chat-close" class="chatbox-header-button" title="Close Chat"
                            aria-label="Close chat">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </h3>
                <div id="chatbox-messages" class="chatbox-messages"></div>
                <button id="chat-scroll-bottom" class="chat-scroll-bottom" title="Scroll to Bottom"
                    aria-label="Scroll to Bottom">
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="chatbox-input-container">
                    <div class="input-wrapper">
                        <textarea id="chat-input" class="input" placeholder="Type a message..." aria-label="Chat input"
                            rows="1"></textarea>
                        <!-- <button id="chat-clear" class="clear" aria-label="Clear input">✖</button> -->
                    </div>
                    <button id="chat-send" class="button send" aria-label="Send message"><i
                            class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        </div>

        <div id="custom-guide" class="rename-popup custom-guide hidden popup-animate" role="dialog"
            aria-labelledby="custom-guide-title">
            <h3 id="custom-guide-title">Help Guide</h3>
            <div id="custom-guide-message"></div>
            <div class="rename-popup-buttons">
                <button id="custom-guide-ok" class="button save">OK</button>
            </div>
        </div>

        <div id="localstorage-settings-popup" class="rename-popup hidden popup-animate" role="dialog"
            aria-labelledby="localstorage-settings-title">
            <div class="rename-popup-content">
                <h3 id="localstorage-settings-title">Local Storage Settings</h3>
                <div class="localstorage-settings-container">
                    <label><input type="checkbox" id="save-searchQuery" checked> Save Search Query</label>
                    <label><input type="checkbox" id="save-selectedFolderId" checked> Save Selected Folder</label>
                    <label><input type="checkbox" id="save-sortType" checked> Save Sort Type</label>
                    <label><input type="checkbox" id="save-viewMode" checked> Save View Mode</label>
                    <label><input type="checkbox" id="save-collapsedFolders" checked> Save Collapsed Folders</label>
                    <label><input type="checkbox" id="save-checkboxesVisible" checked> Save Checkboxes
                        Visibility</label>
                    <label><input type="checkbox" id="save-selectedTag" checked> Save Selected Tags</label>
                </div>
                <div class="rename-popup-buttons">
                    <button id="localstorage-settings-save" class="button save">Save</button>
                    <button id="localstorage-settings-cancel" class="button cancel">Cancel</button>
                </div>
            </div>
        </div>

        <div class="footer">
            <p class="footer-text">
                <span id="year"></span>
                <span class="my-name"> &copy; chickensoup</span>
                - version: <span id="version"></span>
            </p>
        </div>
    </div>

    <script src="./components/lib/marked.min.js"></script>
    <script src="./components/lib/qrcode.min.js"></script>
    <script src="./components/option/option.js" type="module"></script>
    <script src="./components/tag.js" type="module"></script>
    <script src="./components/chat.js" type="module"></script>
    <script src="./components/year.js" type="module"></script>
    <script src="main.js" type="module"></script>
    <script src="./components/sidebar.js" type="module"></script>
    <script src="./components/localization.js" type="module"></script>
</body>

</html>